CHƯƠNG 2: CƠ SỞ LÝ THUYẾT VÀ CÔNG NGHỆ
2.1. STATE MACHINE - MÁY TRẠNG THÁI
2.1.1. Khái niệm và định nghĩa
State Machine hay còn gọi là Máy trạng thái hữu hạn là một mô hình toán học được sử dụng để mô tả hành vi của hệ thống thông qua các trạng thái rời rạc và các chuyển đổi giữa chúng. Tại mỗi thời điểm, hệ thống chỉ có thể ở một trong số hữu hạn các trạng thái đã định nghĩa trước.
Các thành phần cơ bản của State Machine bao gồm States là tập hợp các trạng thái mà hệ thống có thể đạt được, Transitions là các quy tắc chuyển đổi từ trạng thái này sang trạng thái khác, Events là các hành động kích hoạt chuyển đổi, và Guards là các điều kiện cần thỏa mãn để chuyển đổi được phép thực hiện.
2.1.2. Lý do áp dụng State Machine
Em chọn State Machine làm nền tảng cho hệ thống quản lý workflow vì quy trình nghiên cứu khoa học có đặc điểm phù hợp hoàn toàn với mô hình này.
Thứ nhất, quy trình có các trạng thái rõ ràng và tách biệt. Một đề tài nghiên cứu tại mỗi thời điểm chỉ có thể ở một trạng thái duy nhất như đang soạn thảo, đang chờ duyệt cấp Khoa, đang chờ duyệt cấp Trường, đã được phê duyệt, đang thực hiện, hoặc đã hoàn thành. Không thể có tình huống một đề tài vừa đang chờ duyệt vừa đang thực hiện cùng lúc.
Thứ hai, các chuyển đổi trạng thái tuân theo quy tắc nghiệp vụ chặt chẽ. Ví dụ, đề tài chỉ có thể chuyển từ trạng thái nháp sang chờ duyệt Khoa khi giảng viên nhấn nộp. Đề tài không thể nhảy thẳng từ nháp sang đã phê duyệt mà bỏ qua các bước xét duyệt.
Thứ ba, mỗi chuyển đổi cần kiểm tra điều kiện và quyền hạn. Chỉ có Ban Chủ nhiệm Khoa mới được phép chuyển đề tài từ trạng thái chờ duyệt Khoa sang trạng thái tiếp theo. Giảng viên không thể tự phê duyệt đề tài của chính mình.
2.1.3. Hậu quả nếu không sử dụng State Machine
Nếu không áp dụng State Machine, hệ thống sẽ gặp nhiều vấn đề nghiêm trọng.
Vấn đề đầu tiên là mất kiểm soát trạng thái. Khi không có định nghĩa rõ ràng về các trạng thái hợp lệ, dữ liệu có thể rơi vào trạng thái không xác định. Ví dụ, một đề tài có thể bị gán giá trị trạng thái là chuỗi rỗng hoặc một giá trị không có trong danh sách cho phép. Điều này dẫn đến lỗi hiển thị giao diện, lỗi logic nghiệp vụ, và khó khăn trong việc báo cáo thống kê.
Vấn đề thứ hai là logic phân tán và khó bảo trì. Nếu không tập trung logic chuyển đổi vào State Machine, các quy tắc nghiệp vụ sẽ bị rải rác khắp nơi trong code. Khi cần thay đổi quy trình, ví dụ thêm một bước xét duyệt mới, lập trình viên phải tìm và sửa ở nhiều vị trí khác nhau. Điều này dễ dẫn đến thiếu sót và lỗi không nhất quán.
Vấn đề thứ ba là khó kiểm thử. Với State Machine, mỗi quy tắc chuyển đổi là một test case độc lập và dễ kiểm tra. Không có State Machine, việc kiểm thử phải bao phủ tất cả các kịch bản có thể xảy ra, số lượng kịch bản sẽ tăng theo cấp số nhân và dễ bỏ sót.
Vấn đề thứ tư là không thể trực quan hóa quy trình. State Machine cho phép vẽ sơ đồ trạng thái để cả đội kỹ thuật và đội nghiệp vụ cùng hiểu. Không có mô hình này, việc trao đổi và xác nhận yêu cầu với khách hàng trở nên khó khăn hơn nhiều.
2.1.4. Thiết kế State Machine trong hệ thống
Trong hệ thống quản lý nghiên cứu khoa học này, em thiết kế State Machine với 15 trạng thái chuẩn chia thành 5 giai đoạn và 3 trạng thái kết thúc. Chi tiết về các trạng thái và quy tắc chuyển đổi sẽ được trình bày trong Chương 3.